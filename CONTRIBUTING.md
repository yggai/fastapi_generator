# 贡献指南

感谢您对FastAPI Generator项目的关注！我们欢迎并鼓励社区成员参与贡献。本文档提供了参与项目开发的指南，帮助您顺利地提交高质量的代码。

## 目录

- [行为准则](#行为准则)
- [如何贡献](#如何贡献)
- [开发流程](#开发流程)
- [提交规范](#提交规范)
- [分支管理](#分支管理)
- [Pull Request流程](#pull-request流程)
- [代码规范](#代码规范)
- [测试规范](#测试规范)
- [文档规范](#文档规范)
- [版本规范](#版本规范)

## 行为准则

请务必尊重项目的所有贡献者和用户。我们希望所有参与者都能创造一个友好、包容的环境。

## 如何贡献

贡献的方式有很多种，包括但不限于：

- 报告bug
- 提交功能需求
- 编写或改进文档
- 提交代码修复或新功能
- 参与社区讨论

### 报告Bug或提交需求

1. 使用GitHub的Issues功能
2. 使用提供的Issue模板
3. 详细描述问题或需求
4. 提供复现步骤或使用场景

## 开发流程

1. Fork项目仓库
2. 克隆Fork后的仓库到本地
   ```bash
   git clone https://github.com/YOUR-USERNAME/fastapi-generator.git
   cd fastapi-generator
   ```
3. 添加上游仓库
   ```bash
   git remote add upstream https://github.com/original-owner/fastapi-generator.git
   ```
4. 创建新分支
   ```bash
   git checkout -b feature/your-feature
   ```
5. 进行开发
6. 提交代码
7. 创建Pull Request

## 提交规范

我们遵循结构化的提交信息格式，这有助于自动生成变更日志并理解提交的目的。

### 提交信息格式

```
<类型>(<范围>): <简短描述>

<详细描述>

<引用相关issue>
```

### 类型

- **feat**: 新功能
- **fix**: 修复bug
- **docs**: 仅文档更改
- **style**: 不影响代码含义的更改（空格、格式化、缺少分号等）
- **refactor**: 既不修复bug也不添加功能的代码更改
- **perf**: 提高性能的代码更改
- **test**: 添加缺失的测试或纠正现有的测试
- **build**: 影响构建系统或外部依赖的更改（例如：pip, docker, npm）
- **ci**: 对CI配置文件和脚本的更改
- **chore**: 其他不修改src或test文件的更改
- **revert**: 恢复之前的提交

### 范围

指定提交影响的范围（可选）：

- **core**: 核心引擎
- **cli**: 命令行接口
- **generator**: 代码生成器
- **template**: 模板系统
- **fs**: 文件系统
- **util**: 工具函数

### 示例

```
feat(generator): 添加模块生成功能

实现了根据模板自动生成模块代码的功能
支持自定义模板和参数配置

Closes #123
```

## 分支管理

### 分支命名规范

- **main/master**: 主分支，保持稳定可发布状态
- **dev**: 开发分支，包含最新开发代码
- **feature/xxx**: 功能分支，用于开发新功能
- **fix/xxx**: 修复分支，用于修复bug
- **release/x.x.x**: 发布分支，用于准备发布版本
- **hotfix/xxx**: 热修复分支，用于紧急修复生产环境问题

### 工作流程

1. 从`dev`分支创建功能分支
2. 在功能分支上进行开发
3. 完成后提交PR到`dev`分支
4. 经过审核和测试后合并到`dev`
5. 定期将`dev`分支合并到`main`分支并发布版本

## Pull Request流程

### PR标题格式

PR标题应遵循与提交信息相同的格式：
```
<类型>(<范围>): <简短描述>
```

### PR描述内容

- **功能介绍或问题描述**：说明本次PR解决的问题或添加的功能
- **解决方案说明**：简要描述实现方案
- **相关测试内容**：说明添加了哪些测试以验证功能
- **截图或示例**：如适用，提供UI更改的截图或功能使用示例
- **关联的issues**：使用关键词（如"Closes #123"）链接相关issue

### PR检查表

- [ ] 代码风格符合项目规范
- [ ] 添加了必要的测试
- [ ] 通过了所有测试
- [ ] 更新了相关文档
- [ ] 确认代码没有明显的bug或安全问题

### PR审核流程

1. 至少需要一名项目维护者审核
2. 所有自动化测试必须通过
3. 解决所有审核中提出的问题
4. 项目维护者负责合并PR

## 代码规范

### Python代码规范

- 遵循[PEP 8](https://www.python.org/dev/peps/pep-0008/)规范
- 使用[Black](https://github.com/psf/black)格式化代码
- 使用[Ruff](https://github.com/astral-sh/ruff)进行代码检查
- 使用类型注解
- 编写清晰的文档字符串
- 最大行长度为88字符

### 自动化检查

项目中已配置pre-commit钩子，提交前会自动运行以下检查：

- Black格式化
- Ruff检查
- MyPy类型检查
- 测试运行

## 测试规范

- 为所有新功能编写单元测试
- 保持测试覆盖率在80%以上
- 测试代码应放在`tests/`目录中
- 使用pytest运行测试

```bash
pytest
```

## 文档规范

- 所有公共API必须有文档字符串
- 遵循[Google风格的文档字符串](https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings)
- 更新README和其他文档以反映代码变更
- 为复杂功能提供使用示例

## 版本规范

我们遵循[语义化版本规范(SemVer)](https://semver.org/lang/zh-CN/)：

- **主版本号(Major)**：当进行不兼容的API更改时
- **次版本号(Minor)**：当添加向下兼容的新功能时
- **修订号(Patch)**：当进行向下兼容的问题修正时

例如：1.2.3表示主版本1，次版本2，修订版3

---

再次感谢您对FastAPI Generator项目的贡献！如果您有任何问题，请随时在GitHub Issues中提问或联系项目维护者。 